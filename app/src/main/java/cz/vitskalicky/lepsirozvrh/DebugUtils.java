package cz.vitskalicky.lepsirozvrh;

import android.content.Context;
import android.util.Log;

import org.joda.time.LocalDate;
import org.joda.time.LocalDateTime;
import org.joda.time.LocalTime;
import org.simpleframework.xml.Serializer;
import org.simpleframework.xml.core.Persister;

import cz.vitskalicky.lepsirozvrh.items.Rozvrh;
import cz.vitskalicky.lepsirozvrh.items.RozvrhRoot;

public class DebugUtils {
    private static final String TAG = DebugUtils.class.getSimpleName();

    private static DebugUtils instance = null;
    private Context context;

    private DebugUtils(Context ctx){
        context = ctx.getApplicationContext();
    }

    public static DebugUtils getInstance(Context context){
        if (instance == null){
            instance = new DebugUtils(context);
        }
        return instance;
    }

    //demonstration mode
    private Rozvrh demoRozvrh = null;

    public boolean isDemoMode() {
        return SharedPrefs.getBoolean(context, "demo-mode") && BuildConfig.DEBUG;
    }

    public void setDemoMode(boolean newDemoMode) {
        SharedPrefs.setBoolean(context, "demo-mode", newDemoMode);
    }

    public Rozvrh getDemoRozvrh(){
        if (demoRozvrh == null){
            Serializer serializer = new Persister();
            try {
                demoRozvrh = serializer.read(RozvrhRoot.class, demoRozvrhSource).getRozvrh();
            } catch (Exception e) {
                Log.wtf(TAG, "Failed to load demo rozvrh", e);
            }
            LocalDate monday = Utils.getCurrentMonday();
            for (int i = 0; i < demoRozvrh.getDny().size(); i++) {
                demoRozvrh.getDny().get(i).setDatum(monday.plusDays(i).toString("yyyyMMdd"));
            }
        }
        return demoRozvrh;
    }

    public LocalTime getDemoTime(){
        return LocalTime.parse("9:00");
    }
    public LocalDate getDemoDate(){
        return Utils.getCurrentMonday().plusDays(1);
    }

    private static final String demoRozvrhSource = "<?xml version=\"1.0\" encoding=\"utf-8\"?><results><rozvrh><typ>akt</typ><kodcyklu>3</kodcyklu><zkratkacyklu>D</zkratkacyklu><nazevcyklu>týden D</nazevcyklu><hodiny><pocet>12</pocet><hod><caption>1</caption><begintime>8:00</begintime><endtime>8:45</endtime></hod><hod><caption>2</caption><begintime>8:55</begintime><endtime>9:40</endtime></hod><hod><caption>3</caption><begintime>10:00</begintime><endtime>10:45</endtime></hod><hod><caption>4</caption><begintime>10:55</begintime><endtime>11:40</endtime></hod><hod><caption>5</caption><begintime>11:45</begintime><endtime>12:30</endtime></hod><hod><caption>6</caption><begintime>12:35</begintime><endtime>13:20</endtime></hod><hod><caption>7</caption><begintime>14:00</begintime><endtime>14:45</endtime></hod><hod><caption>8</caption><begintime>14:45</begintime><endtime>15:30</endtime></hod><hod><caption>9</caption><begintime>15:40</begintime><endtime>16:25</endtime></hod><hod><caption>10</caption><begintime>16:25</begintime><endtime>17:10</endtime></hod><hod><caption>11</caption><begintime>17:20</begintime><endtime>18:05</endtime></hod><hod><caption>12</caption><begintime>18:15</begintime><endtime>19:00</endtime></hod></hodiny><dny><pocet>5</pocet><den><zkratka>Po</zkratka><datum>20200203</datum><hodiny><hod><idcode>20200203 3ZUDX12UZBNS</idcode><typ>H</typ><zkrpr>Ch</zkrpr><pr>Chemie</pr><zkruc>Di</zkruc><uc>Vlasta Divišová</uc><zkrmist>F</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>d - prvky</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>1</caption><notice></notice></hod><hod><idcode>20200203 4ZUDX 2UND0N</idcode><typ>H</typ><zkrpr>ČJL</zkrpr><pr>Český jazyk a literatura</pr><zkruc>Ce</zkruc><uc>PhDr. Jaroslav Cejnar</uc><zkrmist>F</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Jan Neruda - poezie</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng>změna místnosti (č.10)</chng><caption>2</caption><notice></notice></hod><hod><idcode>20200203 5ZUDX0DUKA6I</idcode><typ>H</typ><zkrpr>G</zkrpr><pr>Geografie</pr><zkruc>Ex</zkruc><uc>Miloš Exner</uc><zkrmist>č.10</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Jižní Asie</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>3</caption><notice></notice></hod><hod><idcode>20200203 6ZUT9 4UPBOA</idcode><typ>H</typ><zkrpr>AJ</zkrpr><pr>Anglický jazyk</pr><zkruc>Hz</zkruc><uc>Mgr. Markéta Hezinová</uc><zkrmist>č.16</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><ukolodevzdat>U 53/8</ukolodevzdat><tema>U8 Test</tema><zkrskup>Aj 1</zkrskup><skup>Aj 1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>4</caption><notice></notice></hod><hod><idcode>20200203 7ZUDX04UZBNE</idcode><typ>H</typ><zkrpr>MA</zkrpr><pr>Matematika a její aplikace</pr><zkruc>Hm</zkruc><uc>Mgr. Šárka Hamáčková</uc><zkrmist>č.19</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Logaritmické nerovnice</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>5</caption><notice></notice></hod><hod><idcode>20200203 8ZUE0 5U6Y7G</idcode><typ>H</typ><zkrpr>NJ</zkrpr><pr>Německý jazyk</pr><zkruc>Št</zkruc><uc>Mgr. Iva Štěpánková</uc><zkrmist>č.26</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>L14 - Zusammenfassung</tema><zkrskup>1</zkrskup><skup>1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>6</caption><notice></notice></hod><hod><idcode>20200203 9ZUDX0CUZBNR</idcode><typ>H</typ><zkrpr>OSZ</zkrpr><pr>Občanský a spol. základ</pr><zkruc>Vý</zkruc><uc>Mgr. Jiří Výborný</uc><zkrmist>č.19</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>pracovní právo - příklady</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng>přesun z 3.2., 8. hod</chng><caption>7</caption><notice></notice></hod><hod><chng>přesun na 3.2., 7. hod</chng><idcode>2020020310ZUDX0CUZBNR</idcode><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod></hodiny></den><den><zkratka>Út</zkratka><datum>20200204</datum><hodiny><hod><idcode>20200204 3ZUE004UZBNE</idcode><typ>H</typ><zkrpr>MA</zkrpr><pr>Matematika a její aplikace</pr><zkruc>Hm</zkruc><uc>Mgr. Šárka Hamáčková</uc><zkrmist>č.19</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Logaritmické rovnice a nerovnice</tema><zkrskup>1</zkrskup><skup>1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>1</caption><notice></notice></hod><hod><idcode>20200204 4ZUE011UP3HI</idcode><typ>H</typ><zkrpr>F</zkrpr><pr>Fyzika</pr><zkruc>Ra</zkruc><uc>Mgr. Michal Rak</uc><zkrmist>F</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Teplotní roztažnost</tema><zkrskup>1</zkrskup><skup>1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>2</caption><notice></notice></hod><hod><idcode>20200204 5ZUE0 5U6Y7G</idcode><typ>H</typ><zkrpr>NJ</zkrpr><pr>Německý jazyk</pr><zkruc>Št</zkruc><uc>Mgr. Iva Štěpánková</uc><zkrmist>č.20</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>L14 - Geschichte erzählen</tema><zkrskup>1</zkrskup><skup>1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>3</caption><notice></notice></hod><hod><idcode>20200204 6ZUDX 8UZBN3</idcode><typ>H</typ><zkrpr>D</zkrpr><pr>Dějepis</pr><zkruc>Hr</zkruc><uc>Mgr. Dana Hrušková</uc><zkrmist>č. 3</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><ukolodevzdat>Prac. list</ukolodevzdat><tema>Anglie a Francie po stoleté válce</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng>změna místnosti (č.19)</chng><caption>4</caption><notice></notice></hod><hod><idcode>20200204 7ZUDX 2UND0N</idcode><typ>H</typ><zkrpr>ČJL</zkrpr><pr>Český jazyk a literatura</pr><zkruc>Ce</zkruc><uc>PhDr. Jaroslav Cejnar</uc><zkrmist>č.17</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Útvary publicistického stylu</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>5</caption><notice></notice></hod><hod><idcode>20200204 8ZUDX0DUKA6I</idcode><typ>H</typ><zkrpr>G</zkrpr><pr>Geografie</pr><zkruc>Ex</zkruc><uc>Miloš Exner</uc><zkrmist>č.10</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Indie</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>6</caption><notice></notice></hod><hod><idcode>20200204 9ZUT9 4UPBOA</idcode><typ>H</typ><zkrpr>AJ</zkrpr><pr>Anglický jazyk</pr><zkruc>Hz</zkruc><uc>Mgr. Markéta Hezinová</uc><zkrmist>č. 4</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Paper correction, Bridge</tema><zkrskup>Aj 1</zkrskup><skup>Aj 1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>7</caption><notice></notice></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod></hodiny></den><den><zkratka>St</zkratka><datum>20200205</datum><hodiny><hod><idcode>20200205 3ZUDY17UTBOG</idcode><typ>H</typ><zkrpr>TV</zkrpr><pr>Tělesná výchova</pr><zkruc>Mč</zkruc><uc>Mgr. Radovan Miča</uc><zkrmist>VT</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Atletika, štafetové běhy</tema><zkrskup>Hoši</zkrskup><skup>hoši</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>1</caption><notice></notice></hod><hod><idcode>20200205 4ZUDY17UTBOG</idcode><typ>H</typ><zkrpr>TV</zkrpr><pr>Tělesná výchova</pr><zkruc>Mč</zkruc><uc>Mgr. Radovan Miča</uc><zkrmist>VT</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Míčové hry</tema><zkrskup>Hoši</zkrskup><skup>hoši</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>2</caption><notice></notice></hod><hod><idcode>20200205 5ZUT9 4UPBOA</idcode><typ>H</typ><zkrpr>AJ</zkrpr><pr>Anglický jazyk</pr><zkruc>Hz</zkruc><uc>Mgr. Markéta Hezinová</uc><zkrmist>č. 2</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>SB 0.1 Diet, Present tenses</tema><zkrskup>Aj 1</zkrskup><skup>Aj 1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>3</caption><notice></notice></hod><hod><idcode>20200205 6ZUDX0CUZBNR</idcode><typ>H</typ><zkrpr>OSZ</zkrpr><pr>Občanský a spol. základ</pr><zkruc>Vý</zkruc><uc>Mgr. Jiří Výborný</uc><zkrmist>č. 8</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>podnikání</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>4</caption><notice></notice></hod><hod><idcode>20200205 7ZUDX 8UZBN3</idcode><typ>H</typ><zkrpr>D</zkrpr><pr>Dějepis</pr><zkruc>Hr</zkruc><uc>Mgr. Dana Hrušková</uc><zkrmist>č. 8</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Písemný test</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>5</caption><notice></notice></hod><hod><chng>zrušeno</chng><idcode>20200205 8ZUDX0EU3KK3</idcode><typ>X</typ><zkratka></zkratka></hod><hod><idcode>20200205 9ZUQP0IUG78B</idcode><typ>H</typ><zkrpr>VýO</zkrpr><pr>Výtvarný obor</pr><zkruc>Da</zkruc><uc>Olga Davidová</uc><zkrmist>č.20</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Surrealismus</tema><zkrskup>VýO</zkrskup><skup>VýO</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>7</caption><notice></notice></hod><hod><idcode>2020020510ZUQP0IUG78B</idcode><typ>H</typ><zkrpr>VýO</zkrpr><pr>Výtvarný obor</pr><zkruc>Da</zkruc><uc>Olga Davidová</uc><zkrmist>č.20</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Surrealismus</tema><zkrskup>VýO</zkrskup><skup>VýO</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>8</caption><notice></notice></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod></hodiny></den><den><zkratka>Čt</zkratka><datum>20200206</datum><hodiny><hod><chng>zrušeno</chng><idcode>20200206 3ZUDX11UP3HI</idcode><typ>X</typ><zkratka></zkratka></hod><hod><idcode>20200206 4ZUE0 5U6Y7G</idcode><typ>H</typ><zkrpr>NJ</zkrpr><pr>Německý jazyk</pr><zkruc>Št</zkruc><uc>Mgr. Iva Štěpánková</uc><zkrmist>č.10</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>L14 - Situationen beschreiben</tema><zkrskup>1</zkrskup><skup>1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>2</caption><notice></notice></hod><hod><idcode>20200206 5ZUQQ0EU3KK3</idcode><typ>H</typ><zkrpr>BiG</zkrpr><pr>Biologie a geologie</pr><zkruc>So</zkruc><uc>RNDr. Danuše Součková Ph. D.</uc><zkrmist>č.23</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Morfologie hmyzu PC</tema><zkrskup>IKT1</zkrskup><skup>IKT 1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>3</caption><notice></notice></hod><hod><idcode>20200206 6ZUQQ0EU3KK3</idcode><typ>H</typ><zkrpr>BiG</zkrpr><pr>Biologie a geologie</pr><zkruc>So</zkruc><uc>RNDr. Danuše Součková Ph. D.</uc><zkrmist>č.23</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Morfologie hmyzu PC</tema><zkrskup>IKT1</zkrskup><skup>IKT 1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>4</caption><notice></notice></hod><hod><idcode>20200206 7ZUQQ0FUJ8XX</idcode><typ>H</typ><zkrpr>IIKT</zkrpr><pr>Informatika a IKT</pr><zkruc>Bě</zkruc><uc>Mgr. Blanka Běhounková</uc><zkrmist>IKT</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>tabulka , sestava</tema><zkrskup>IKT1</zkrskup><skup>IKT 1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>5</caption><notice></notice></hod><hod><idcode>20200206 8ZUQQ0FUJ8XX</idcode><typ>H</typ><zkrpr>IIKT</zkrpr><pr>Informatika a IKT</pr><zkruc>Bě</zkruc><uc>Mgr. Blanka Běhounková</uc><zkrmist>IKT</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>tabulka , sestava</tema><zkrskup>IKT1</zkrskup><skup>IKT 1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>6</caption><notice></notice></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod></hodiny></den><den><zkratka>Pá</zkratka><datum>20200207</datum><hodiny><hod><idcode>20200207 3ZUDX04UZBNE</idcode><typ>H</typ><zkrpr>MA</zkrpr><pr>Matematika a její aplikace</pr><zkruc>Hm</zkruc><uc>Mgr. Šárka Hamáčková</uc><zkrmist>č.19</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Logaritmické nerovnice</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>1</caption><notice></notice></hod><hod><idcode>20200207 4ZUE0 5U6Y7G</idcode><typ>H</typ><zkrpr>NJ</zkrpr><pr>Německý jazyk</pr><zkruc>Št</zkruc><uc>Mgr. Iva Štěpánková</uc><zkrmist>č.20</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Gro3e Pause - Würfelspiel</tema><zkrskup>1</zkrskup><skup>1</skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>2</caption><notice></notice></hod><hod><idcode>20200207 5ZUT9 4UPBOA</idcode><typ>H</typ><zkrpr>AJ</zkrpr><pr>Anglický jazyk</pr><zkruc>Hz</zkruc><uc>Mgr. Markéta Hezinová</uc><zkrmist>č.16</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>WB Exercises, Vocabulary Bank, SB 0.2 Fun and games</tema><zkrskup>Aj 1</zkrskup><skup>Aj 1</skup><cycle>D</cycle><uvol></uvol><chng>změna místnosti (č. 4)</chng><caption>3</caption><notice></notice></hod><hod><idcode>20200207 6ZUDX0EU3KK3</idcode><typ>H</typ><zkrpr>BiG</zkrpr><pr>Biologie a geologie</pr><zkruc>So</zkruc><uc>RNDr. Danuše Součková Ph. D.</uc><zkrmist>č.23</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>stonožky</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>4</caption><notice></notice></hod><hod><idcode>20200207 7ZUDX12UZBNS</idcode><typ>H</typ><zkrpr>Ch</zkrpr><pr>Chemie</pr><zkruc>Di</zkruc><uc>Vlasta Divišová</uc><zkrmist>č.19</zkrmist><mist></mist><zkrabs></zkrabs><abs></abs><tema>Vlastnosti d- prvků</tema><zkrskup></zkrskup><skup></skup><cycle>D</cycle><uvol></uvol><chng></chng><caption>5</caption><notice></notice></hod><hod><chng>zrušeno</chng><idcode>20200207 8ZUDX 2UND0N</idcode><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod><hod><typ>X</typ><zkratka></zkratka></hod></hodiny></den></dny></rozvrh><result>01</result></results>";
}
